version: "{build}"
clone_depth: 5
clone_folder: c:\gopath\src\github.com\gobuffalo\buffalo

environment:
  GOPATH: c:\gopath
  matrix:
  - GOBIN: c:\go
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2017

build:
  verbosity: normal

deploy: false

build_script:
- cmd: >-
    set GO111MODULE=on

    go build -v github.com/gobuffalo/buffalo/buffalo

    go install github.com/gobuffalo/buffalo/buffalo

test_script:
  - set GO111MODULE=on
  - go test -race ./...
